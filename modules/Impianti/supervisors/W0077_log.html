<!--daterangepicker-->
<link rel="stylesheet" href="css/bs3/datepicker.css" />
<link rel="stylesheet" href="css/bs3/daterangepicker-bs3.css" />

<div class="row ">
    <div class="col-md-12">
        <!--breadcrumbs start -->
        <ul class="breadcrumb">
            <li><a href="javascript:$.module.load('Impianti/supervisors/ManageDevice8');"><i class="fa fa-bookmark-o"></i> <span name="lbl" caption="heatingsystem">heatingsystem</span></a></li>
            <li><a href="javascript:$.module.load('Impianti/supervisors/Device8Detail');"><span id="hsDescr"></span></a></li>   
            <li><a href="javascript:$.module.load('Impianti/supervisors/Device8W0077');"><span id="Descr"></span></a></li>            
        </ul>
        <!--breadcrumbs end -->
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <section class="panel">
            <header class="panel-heading panel-supervisor"> 
                <span id="logDescription"></span>               
                <span class="tools pull-right"> 
                    <a href="javascript:;" class="fa fa-chevron-down"></a>                   
                </span>               
                <div class="clearfix"></div>
            </header>
            <div class="panel-body">
                <form action="#" class="form-horizontal ">
                    <div class="form-group">
                        <label class="control-label col-md-2"><span name="lbl" caption="daterange">daterange</span></label>
                        <div class="col-md-4">
                            <div class="input-group input-large" data-date="13/07/2013" data-date-format="dd/mm/yyyy">
                                <input type="text" class="form-control dpd1" id="datefrom" name="datefrom">
                                <span class="input-group-addon">To</span>
                                <input type="text" class="form-control dpd2" id="dateto" name="dateto">                                
                            </div>                             
                        </div>
                          
                            <div class="col-md-2">
                                <select id="logLevel" class="form-control input-sx m-bot15 ">
                                    <option value="0">PLC</option>
                                    <option value="1">GATEWAY BATTERY</option>  
                                    <option value="2">PCS HPP 35</option>                                     
                                </select>
                            </div>


                         <div class="col-md-2">
                             <a href="#" id="btnLoad" class="btn btn-sm btn-default">Load</a>                           
                         </div>
                    </div>
                </form>
            </div>
        </section>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <section class="panel">
            <header class="panel-heading  panel-supervisor">
               <span class="pull-left">
                    <span name="lbl" caption="W0077">W0077</span>
                </span>
 
                <span class="tools pull-right"> 
                    <a href="javascript:call_chart();" class="is4Table fa fa-bar-chart-o"></a>&nbsp;
                    <a href="javascript:call_table();" class="is4Chart fa fa-list-ul"></a>&nbsp;
                    <a href="javascript:clear_chart();" class="is4Chart fa fa-undo"></a>&nbsp;
                    <a href="javascript:call_export();" class="is4Table fa fa-download"></a>&nbsp;                 
                </span>
                <div class="clearfix"></div>
            </header>
            <div class="panel-body">
                <div id="tableWait" style="width:100%; text-align:center; display:none;">
                    <div style="display:inline-block"><img src="images/table_load.gif" /></div>
                </div>
                <div id="tableContent" style="display:none;">
                    <div id="panel-body-ListLog" style="height:400px;overflow-y:auto;overflow-x:auto;">                       
                        <table id="tableLog1" class="table table-striped table-bordered table-hover table-striped cf scroll" style="display:none">
                            <thead>
                                <tr>
                                    <th class="col-xs-2"><span name="lbl" caption="day">day</span> </th>
                                    <th class="col-xs-2"><span name="lbl" caption="code">code</span> </th>
                                    <th class="col-xs-2"><span name="lbl" caption="description">description</span></th>
                                    <th class="col-xs-2"><span name="lbl" caption="status">status</span> </th>

                                    <th>System status</th>
                                    <th>Battery status</th>
                                    <th>Voltage L12&nbsp;(V)</th>
                                    <th>Voltage L23&nbsp;(V)</th>
                                    <th>Voltage L31&nbsp;(V)</th>
                                    <th>PCurrent L12&nbsp;(A)</th>
                                    <th>Current L23&nbsp;(A)</th>
                                    <th>Current L31&nbsp;(A)</th>
                                    <th>Active Power Total&nbsp;(W)</th>
                                    <th>Reactive Power Total&nbsp;(var)</th>
                                    <th>Apparent Power Total&nbsp;(Va)</th>
                                    <th>PM1_Frequency&nbsp;(Hz)</th>
                                    <th>Power Factor Total</th>

                                </tr>
                            </thead>
                            <tbody id="logList1"></tbody>
                        </table>

                        <table id="tableLog2" class="table table-striped table-bordered table-hover cf " style="display:none">
                            <thead>
                                <tr>
                                    <th class="col-xs-2"><span name="lbl" caption="day">day</span> </th>
                                    <th class="col-xs-2"><span name="lbl" caption="code">code</span> </th>
                                    <th class="col-xs-2"><span name="lbl" caption="description">description</span></th>
                                    <th class="col-xs-2"><span name="lbl" caption="status">status</span> </th>

                                    <th>Actual DC Voltage&nbsp;(V)</th>
                                    <th>Actual DC Current&nbsp;(A)</th>
                                    <th>Actual Battery SOC&nbsp;(%)</th>
                                    <th>Actual Heaters Current&nbsp;(A)</th>
                                    <th>Vdc Link Request&nbsp;(V)</th>
                                    <th>Limit Discharge Current&nbsp;(A)</th>
                                    <th>Limit Charge Current&nbsp;(A)</th>
                                    <th>Min DC Voltage&nbsp;(V)</th>
                                    <th>Max DC Voltage&nbsp;(V)</th>
                                    <th>Actual Battery Capacity&nbsp;(Ah)</th>
                                    <th>Max Battery Voltage&nbsp;(V)</th>
                                    <th>Min Battery Voltage&nbsp;(V)</th>
                                    <th>Max Battery Temperature</th>
                                    <th>Min Battery Temperature</th>
                                    <th>Actual DC Power&nbsp;(W)</th>
                                    <th>Op Time</th>
                                    <th>Status Warning 1</th>
                                    <th>Status Warning 2</th>
                                    <th>Status Alarm 1</th>
                                    <th>Status Alarm 2</th>
                                    <th>tatus Warning A</th>
                                    <th>Status Warning B</th>
                                    <th>Status Alarm A</th>
                                    <th>CONTROL WORD</th>
                                    <th>STATUS WORD</th>

                                </tr>
                            </thead>
                            <tbody id="logList2"></tbody>
                        </table>

                        <table id="tableLog3" class="table table-striped table-bordered table-hover cf " style="display:none">
                            <thead>
                                <tr>
                                    <th class="col-xs-2"><span name="lbl" caption="day">day</span> </th>
                                    <th class="col-xs-2"><span name="lbl" caption="code">code</span> </th>
                                    <th class="col-xs-2"><span name="lbl" caption="description">description</span></th>
                                    <th class="col-xs-2"><span name="lbl" caption="status">status</span> </th>

                                    <th>Actual Current R&nbsp;(A)</th>
                                    <th>Actual Current S&nbsp;(A)</th>
                                    <th>Actual Current T&nbsp;(A)</th>
                                    <th>Actual Voltage RS&nbsp;(V)</th>
                                    <th>Actual Voltage ST&nbsp;(V)</th>
                                    <th>Actual Voltage TR&nbsp;(V)/th>
                                    <th>Frequency&nbsp;(Hz)</th>
                                    <th>P Actual&nbsp;(W)</th>
                                    <th>Q Actual&nbsp;(var)</th>
                                    <th>A Actual&nbsp;(Va)</th>
                                    <th>Battery Voltage&nbsp;(V)</th>
                                    <th>Battery Current&nbsp;(A)</th>
                                    <th>Battery Power&nbsp;(W)</th>
                                    <th>PV Voltage&nbsp;(V)</th>
                                    <th>PV Current&nbsp;(A)</th>
                                    <th>PV Power&nbsp;(W)</th>
                                    <th>HPP Status</th>
                                    <th>Drive Status</th>
                                    <th>Chopper Status</th>
                                    <th>Run Mode</th>
                                    <th>Drive Warning 1</th>
                                    <th>Drive Alarm 1</th>
                                    <th>HPP Warning 1</th>
                                    <th>HPP Alarm 1</th>

                                </tr>
                            </thead>
                            <tbody id="logList3"></tbody>
                        </table>

                    </div>
                </div>
                <div id="graphContent" style="display:none;height:600px">
                    <div id="graphSelect">
                        <ul id="graph2Select" class="nav nav-pills nav-stacked">
                            <li id="GW_Actual_Battery_SOC">
                                <a href="javascript:;">
                                    Actual Battery %
                                    <span class="pull-right"><i class="fa fa-chevron-right"></i></span>
                                    <div class="clearfix"></div>
                                </a>
                            </li>
                            <li id="PM1_Active_Power_Total">
                                <a href="javascript:;">
                                    PM1 Active Power Total
                                    <span class="pull-right"><i class="fa fa-chevron-right"></i></span>
                                    <div class="clearfix"></div>
                                </a>
                            </li>

                        </ul>
                    </div>
			        <div id="placeholderContent" style="display:none;">
				        <div id="placeholder" style="width:100%;height:600px;"></div>
			        </div>
                </div>
            </div>
        </section>
    </div>
</div>

<!--templates-->
<script type="text/x-jquery-tmpl" id="tmpllogList1">
    <tr>
        <td style="white-space:nowrap;">${moment(dtLog).format('DD/MM/YYYY HH:mm')}</td>
        <td>${Cod}</td>
        <td style="white-space:nowrap;">${Descr.trim()}</td>
        <td>${stato}</td>
        <td>${Number(SYSTEM_STATUS).toLocaleString()}</td>
        <td>${Number(BATTERY_STATUS).toLocaleString()}</td>
        <td>${Number(PM1_Voltage_L12).toLocaleString()}</td>
        <td>${Number(PM1_Voltage_L23).toLocaleString()}</td>
        <td>${Number(PM1_Voltage_L31).toLocaleString()}</td>
        <td>${Number(PM1_Current_L12).toLocaleString()}</td>
        <td>${Number(PM1_Current_L23).toLocaleString()}</td>
        <td>${Number(PM1_Current_L23).toLocaleString()}</td>
        <td>${Number(PM1_Active_Power_Total).toLocaleString()}</td>
        <td>${Number(PM1_Reactive_Power_Total).toLocaleString()}</td>
        <td>${Number(PM1_Apparent_Power_Total).toLocaleString()}</td>
        <td>${Number(PM1_Frequency).toLocaleString()}</td>
        <td>${Number(PM1_Power_Factor_Total).toLocaleString()}</td>
    </tr>
</script>
<script type="text/x-jquery-tmpl" id="tmpllogList2">
    <tr>
        <td style="white-space:nowrap;">${moment(dtLog).format('DD/MM/YYYY HH:mm')}</td>
        <td>${Cod}</td>
        <td style="white-space:nowrap;">${Descr.trim()}</td>
        <td>${stato}</td>
        <td>${Number(GW_Actual_DC_Voltage).toLocaleString()}</td>
        <td>${Number(GW_Actual_DC_Current).toLocaleString()}</td>
        <td>${Number(GW_Actual_Battery_SOC).toLocaleString()}</td>
        <td>${Number(GW_Actual_Heaters_Current).toLocaleString()}</td>
        <td>${Number(GW_Vdc_Link_Request).toLocaleString()}</td>
        <td>${Number(GW_Limit_Discharge_Current).toLocaleString()}</td>
        <td>${Number(GW_Limit_Charge_Current).toLocaleString()}</td>
        <td>${Number(GW_Min_DC_Voltage).toLocaleString()}</td>
        <td>${Number(GW_Max_DC_Voltage).toLocaleString()}</td>
        <td>${Number(GW_Actual_Battery_Capacity).toLocaleString()}</td>
        <td>${Number(GW_Max_Battery_Voltage).toLocaleString()}</td>
        <td>${Number(GW_Min_Battery_Voltage).toLocaleString()}</td>
        <td>${Number(GW_Max_Battery_Temperature).toLocaleString()}</td>
        <td>${Number(GW_Min_Battery_Temperature).toLocaleString()}</td>
        <td>${Number(GW_Actual_DC_Power).toLocaleString()}</td>
        <td>${Number(GW_HOURS_Op_Time).toLocaleString()}:${Number(GW_MIN_Op_Time).toLocaleString()}</td>
        <td>${Number(GW_Status_Warning_1).toLocaleString()}</td>
        <td>${Number(GW_Status_Warning_2).toLocaleString()}</td>
        <td>${Number(GW_Status_Alarm_1).toLocaleString()}</td>
        <td>${Number(GW_Status_Alarm_2).toLocaleString()}</td>
        <td>${Number(GW_Status_Warning_A).toLocaleString()}</td>
        <td>${Number(GW_Status_Warning_B).toLocaleString()}</td>
        <td>${Number(GW_Status_Alarm_A).toLocaleString()}</td>
        <td>${Number(GW_CONTROL_WORD).toLocaleString()}</td>
        <td>${Number(GW_STATUS_WORD).toLocaleString()}</td>
    </tr>
</script>
<script type="text/x-jquery-tmpl" id="tmpllogList3">
    <tr>
        <td style="white-space:nowrap;">${moment(dtLog).format('DD/MM/YYYY HH:mm')}</td>
        <td>${Cod}</td>
        <td style="white-space:nowrap;">${Descr.trim()}</td>
        <td>${stato}</td>
        <td>${Number(PCS_Actual_Current_R).toLocaleString()}</td>
        <td>${Number(PCS_Actual_Current_S).toLocaleString()}</td>
        <td>${Number(PCS_Actual_Current_T).toLocaleString()}</td>
        <td>${Number(PCS_Actual_Voltage_RS).toLocaleString()}</td>
        <td>${Number(PCS_Actual_Voltage_ST).toLocaleString()}</td>
        <td>${Number(PCS_Actual_Voltage_TR).toLocaleString()}</td>
        <td>${Number(PCS_Frequency).toLocaleString()}</td>
        <td>${Number(PCS_P_Actual).toLocaleString()}</td>
        <td>${Number(PCS_Q_Actual).toLocaleString()}</td>
        <td>${Number(PCS_A_Actual).toLocaleString()}</td>
        <td>${Number(PCS_Battery_Voltage).toLocaleString()}</td>
        <td>${Number(PCS_Battery_Current).toLocaleString()}</td>
        <td>${Number(PCS_Battery_Power).toLocaleString()}</td>
        <td>${Number(PCS_PV_Voltage).toLocaleString()}</td>
        <td>${Number(PCS_PV_Current).toLocaleString()}</td>
        <td>${Number(PCS_PV_Power).toLocaleString()}</td>
        <td>${Number(PCS_HPP_Status).toLocaleString()}</td>
        <td>${Number(PCS_Drive_Status).toLocaleString()}</td>
        <td>${Number(PCS_Chopper_Status).toLocaleString()}</td>
        <td>${Number(PCS_Run_Mode).toLocaleString()}</td>
        <td>${Number(PCS_Drive_Warning_1).toLocaleString()}</td>
        <td>${Number(PCS_Drive_Alarm_1).toLocaleString()}</td>
        <td>${Number(PCS_HPP_Warning_1).toLocaleString()}</td>
        <td>${Number(PCS_HPP_Alarm_1).toLocaleString()}</td>
    </tr>
</script>


<script type="text/x-jquery-tmpl" id="tmplProbeElem">
    <tr>
        <td>${ProbeDesc}</td>     
        <td id="ProbeElem_${ProbeCod}">${currentValue}°&nbsp;C</td>
    </tr>
</script>
<script type="text/x-jquery-tmpl" id="tmplListLogLastItem">
    <tr id="loadMore">
        <td colspan="4">load more</td>
    </tr>
</script>
<!--/templates-->

<script type="text/javascript" src="js/jq/jquery.flot.js"></script>
<script type="text/javascript" src="js/jq/jquery.flot.selection.js"></script>
<script type="text/javascript" src="js/jq/jquery.flot.time.js"></script>

<script type="text/javascript" src="js/jq/jquery.table2excel.js"></script>
<!--chart-->
<script type="text/javascript" src="js/Chart/Chart.min.js"></script>
<!--/chart-->
<!--daterangepicker-->
<script type="text/javascript" src="js/bs3/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="js/bs3/daterangepicker.js"></script>

<script src="js/app/core/managelang.js" type="text/javascript"></script>
<script src="js/app/Impianti/supervisors/W077_log.js" type="text/javascript"></script>
